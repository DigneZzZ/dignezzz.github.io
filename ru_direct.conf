# Shadowrocket: 2024-09-27 01:08:05
# Author: DigneZzZ
# VPN Sale bot: https://t.me/vsemvpn_bot
# VPN Channel: https://vsemvpn_com

[General]
bypass-system = true
skip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, captive.apple.com
tun-excluded-routes = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32, 239.255.255.250/32
# Альтернативные DNS-адреса, можно указать свои от сервера AdGuard Home
dns-server = https://dns.adguard-dns.com/dns-query, 8.8.8.8, 8.8.4.4
 
# Запасной DNS-сервер по умолчанию системный
fallback-dns-server = system
ipv6 = true
prefer-ipv6 = false
dns-fallback-system = false
dns-direct-system = false
icmp-auto-reply = true
always-reject-url-rewrite = false
private-ip-answer = true
# direct domain fail to resolve use proxy rule
dns-direct-fallback-proxy = false
# The fallback behavior when UDP traffic matches a policy that doesn't support the UDP relay. Possible values: DIRECT, REJECT.
udp-policy-not-supported-behaviour = REJECT
update-url = https://dignezzz.github.io/ru_direct.conf

[Rule]
# DIRECT

DOMAIN-KEYWORD,telegram,DIRECT
DOMAIN,whatsapp,DIRECT
DOMAIN-SUFFIX,imgsmail.ru,DIRECT
DOMAIN-SUFFIX,mail.ru,DIRECT
DOMAIN-SUFFIX,mycdn.me,DIRECT
GEOIP,RU,DIRECT
DOMAIN-SUFFIX,ru,DIRECT
DOMAIN-SUFFIX,.xn--p1ai,DIRECT
DOMAIN-SUFFIX,.su,DIRECT
DOMAIN,.su,DIRECT
DOMAIN,vk.com,DIRECT
DOMAIN,starline.online,DIRECT
RULE-SET,https://dignezzz.github.io/shadowrocket/proxy_ru_direct.list,DIRECT

# WHATSAPP
DOMAIN,graph.facebook.com,DIRECT
DOMAIN-SUFFIX,bintray.com,DIRECT
DOMAIN-SUFFIX,whatsapp.biz,DIRECT
DOMAIN-SUFFIX,whatsapp.com,DIRECT
DOMAIN-SUFFIX,whatsapp.net,DIRECT
DOMAIN-KEYWORD,whatsapp,DIRECT
IP-CIDR,158.85.224.160/27,DIRECT,no-resolve
IP-CIDR,158.85.46.128/27,DIRECT,no-resolve
IP-CIDR,158.85.5.192/27,DIRECT,no-resolve
IP-CIDR,173.192.222.160/27,DIRECT,no-resolve
IP-CIDR,173.192.231.32/27,DIRECT,no-resolve
IP-CIDR,18.194.0.0/15,DIRECT,no-resolve
IP-CIDR,184.173.128.0/17,DIRECT,no-resolve
IP-CIDR,208.43.122.128/27,DIRECT,no-resolve
IP-CIDR,34.224.0.0/12,DIRECT,no-resolve
IP-CIDR,50.22.198.204/30,DIRECT,no-resolve
IP-CIDR,54.242.0.0/15,DIRECT,no-resolve


# Viber
DOMAIN-SUFFIX,viber.com,DIRECT
DOMAIN-SUFFIX,viber.me,DIRECT
DOMAIN-SUFFIX,viberapp.com,DIRECT
DOMAIN-KEYWORD,viber,DIRECT

# APPLE
DOMAIN,www-cdn.icloud.com.akadns.net,DIRECT
DOMAIN-SUFFIX,aaplimg.com,DIRECT
DOMAIN-SUFFIX,crashlytics.com,DIRECT
DOMAIN-SUFFIX,icloud-content.com,DIRECT
DOMAIN-SUFFIX,icloud.com,DIRECT
DOMAIN-SUFFIX,icloud.com.cn,DIRECT
DOMAIN-SUFFIX,me.com,DIRECT
DOMAIN-SUFFIX,mzstatic.com,DIRECT


# Google
# GEOSITE,google,DIRECT

# Telegram
DOMAIN-SUFFIX,t.me,DIRECT
DOMAIN-SUFFIX,tdesktop.com,DIRECT
DOMAIN-SUFFIX,telegra.ph,DIRECT
DOMAIN-SUFFIX,telegram.me,DIRECT
DOMAIN-SUFFIX,telegram.org,DIRECT
DOMAIN-SUFFIX,telesco.pe,DIRECT
IP-CIDR,91.108.4.0/22,DIRECT,no-resolve
IP-CIDR,91.108.8.0/22,DIRECT,no-resolve
IP-CIDR,91.108.12.0/22,DIRECT,no-resolve
IP-CIDR,91.108.16.0/22,DIRECT,no-resolve
IP-CIDR,91.108.56.0/22,DIRECT,no-resolve
IP-CIDR,109.239.140.0/24,DIRECT,no-resolve
IP-CIDR,149.154.160.0/20,DIRECT,no-resolve
IP-CIDR,2001:B28:F23D::/48,DIRECT,no-resolve
IP-CIDR,2001:B28:F23F::/48,DIRECT,no-resolve
IP-CIDR,2001:67C:4E8::/48,DIRECT,no-resolve
# LAN
IP-CIDR,192.168.0.0/16,DIRECT
IP-CIDR,10.0.0.0/8,DIRECT
IP-CIDR,172.16.0.0/12,DIRECT
IP-CIDR,127.0.0.0/8,DIRECT
############### PROXY

# Top blocked sites
DOMAIN-KEYWORD,pornhub,PROXY
DOMAIN-KEYWORD,youtube,PROXY
DOMAIN-KEYWORD,facebook,PROXY
DOMAIN-KEYWORD,instagram,PROXY
DOMAIN-KEYWORD,canva,PROXY
DOMAIN-SUFFIX,canva.com,PROXY
GEOSITE,openai,PROXY
DOMAIN-SUFFIX,kino.pub,PROXY
DOMAIN,x.com,PROXY
GEOSITE,category-porn,PROXY
GEOSITE,spotify,PROXY
GEOSITE,ubisoft,PROXY
GEOSITE,rockstar,PROXY
# META
GEOSITE,meta,PROXY
GEOSITE,youtube,PROXY
# OTHER SITES
DOMAIN-SUFFIX,youtube.com,PROXY
DOMAIN-SUFFIX,ytimg.com,PROXY
DOMAIN-SUFFIX,googlevideo.com,PROXY
DOMAIN-SUFFIX,ggpht.com,PROXY
DOMAIN-SUFFIX,rutracker.org,PROXY
DOMAIN-SUFFIX,rutracker.cc,PROXY
DOMAIN-SUFFIX,static.rutracker.cc,PROXY
DOMAIN-SUFFIX,x.com,PROXY
DOMAIN-SUFFIX,twimg.com,PROXY
DOMAIN-SUFFIX,ads-twitter.com,PROXY
DOMAIN-SUFFIX,t.co,PROXY
DOMAIN-SUFFIX,twitter.com,PROXY
DOMAIN-SUFFIX,google.com,PROXY
DOMAIN-SUFFIX,doubleclick.net,PROXY
DOMAIN-SUFFIX,api.x.com,PROXY
DOMAIN-SUFFIX,analytics.x.com,PROXY
DOMAIN-SUFFIX,pbs.twimg.com,PROXY
DOMAIN-SUFFIX,openai.com,PROXY
DOMAIN-SUFFIX,hetzner.com,PROXY
DOMAIN-SUFFIX,linkedin.com,PROXY
DOMAIN-SUFFIX,digitalocean.com,PROXY
DOMAIN-SUFFIX,proton.me,PROXY
DOMAIN-SUFFIX,protonvpn.com,PROXY
DOMAIN-SUFFIX,nordvpn.com,PROXY
DOMAIN-SUFFIX,nordaccount.com,PROXY
DOMAIN-SUFFIX,nordcdn.com,PROXY
DOMAIN-SUFFIX,nordsec.com,PROXY
DOMAIN-SUFFIX,nordpass.com,PROXY
DOMAIN-SUFFIX,zendesk.com,PROXY
DOMAIN-SUFFIX,growthbook.io,PROXY
DOMAIN-SUFFIX,nordlocker.com,PROXY
DOMAIN-SUFFIX,nordstellar.com,PROXY
DOMAIN-SUFFIX,adguard.com,PROXY
DOMAIN-SUFFIX,adguard-dns.com,PROXY
DOMAIN-SUFFIX,thepiratebay.org,PROXY
DOMAIN-SUFFIX,doramy.club,PROXY
DOMAIN-SUFFIX,selezen.org,PROXY
DOMAIN-SUFFIX,daemon-tools.cc,PROXY
DOMAIN-SUFFIX,amnezia.org,PROXY
DOMAIN-SUFFIX,10minutemail.com,PROXY
DOMAIN-SUFFIX,windscribe.com,PROXY
DOMAIN-SUFFIX,netflix.com,PROXY
DOMAIN-SUFFIX,prnt.sc,PROXY
DOMAIN-SUFFIX,consensu.org,PROXY
DOMAIN-SUFFIX,googlesyndication.com,PROXY
DOMAIN-SUFFIX,facebook.com,PROXY
DOMAIN-SUFFIX,fbcdn.net,PROXY
DOMAIN-SUFFIX,messenger.com,PROXY
DOMAIN-SUFFIX,meta.com,PROXY
DOMAIN-SUFFIX,fbsbx.com,PROXY
DOMAIN-SUFFIX,cdninstagram.com,PROXY
DOMAIN-SUFFIX,threads.net,PROXY
DOMAIN-SUFFIX,dpidetector.org,PROXY
DOMAIN-SUFFIX,dpidetect.org,PROXY
DOMAIN-SUFFIX,te-st.org,PROXY
DOMAIN-SUFFIX,dept.one,PROXY
DOMAIN-SUFFIX,chatgpt.com,PROXY
DOMAIN-SUFFIX,static.doubleclick.net,PROXY
DOMAIN-SUFFIX,googleads.g.doubleclick.net,PROXY

# YOUTUBE
DOMAIN-SUFFIX,ggpht.cn,PROXY
DOMAIN-SUFFIX,ggpht.com,PROXY
DOMAIN-SUFFIX,googlevideo.com,PROXY
DOMAIN-SUFFIX,gvt1.com,PROXY
DOMAIN-SUFFIX,gvt2.com,PROXY
DOMAIN-SUFFIX,video.google.com,PROXY
DOMAIN-SUFFIX,wide-youtube.l.google.com,PROXY
DOMAIN-SUFFIX,withyoutube.com,PROXY
DOMAIN-SUFFIX,youtu.be,PROXY
DOMAIN-SUFFIX,youtube,PROXY
DOMAIN-SUFFIX,youtubeeducation.com,PROXY
DOMAIN-SUFFIX,youtubeembeddedplayer.googleapis.com,PROXY
DOMAIN-SUFFIX,youtubefanfest.com,PROXY
DOMAIN-SUFFIX,youtubegaming.com,PROXY
DOMAIN-SUFFIX,youtubego.co.id,PROXY
DOMAIN-SUFFIX,youtubego.co.in,PROXY
DOMAIN-SUFFIX,youtubego.com,PROXY
DOMAIN-SUFFIX,youtubego.com.br,PROXY
DOMAIN-SUFFIX,youtubego.id,PROXY
DOMAIN-SUFFIX,youtubego.in,PROXY
DOMAIN-SUFFIX,youtubei.googleapis.com,PROXY
DOMAIN-SUFFIX,youtubekids.com,PROXY
DOMAIN-SUFFIX,youtubemobilesupport.com,PROXY
DOMAIN-SUFFIX,yt.be,PROXY
DOMAIN-SUFFIX,ytimg.com,PROXY
DOMAIN-KEYWORD,youtube,PROXY
USER-AGENT,*YouTubeMusic*,DIRECT
USER-AGENT,*com.google.ios.youtubemusic*,PROXY
USER-AGENT,*youtube*,PROXY
USER-AGENT,YouTube*,PROXY
USER-AGENT,YouTubeMusic*,PROXY
USER-AGENT,com.google.ios.youtube*,PROXY
USER-AGENT,com.google.ios.youtubemusic*,PROXY
RULE-SET,https://dignezzz.github.io/shadowrocket/proxy.list,PROXY
RULE-SET,https://dignezzz.github.io/shadowrocket/antifilter.list,PROXY
RULE-SET,https://dignezzz.github.io/shadowrocket/proxy-youtube.list,PROXY
RULE-SET,https://dignezzz.github.io/shadowrocket/proxy-finance-ru.list,DIRECT
FINAL,DIRECT

[URL Rewrite]
(^https?:\/\/.+\.googlevideo\.com\/.+)(&ctier=[A-Z])(&.+) $1$3 302
^https?:\/\/[\w-]+\.googlevideo\.com\/initplayback.+&oad _ REJECT-IMG
https?:\/\/.+\.googlevideo\.com\/.+&oad reject header
https?:\/\/.+\.googlevideo\.com\/ptracking\?pltype=adhost reject header
https?:\/\/.+\.youtube\.com\/api\/stats\/.+adformat reject header
https?:\/\/.+\.youtube\.com\/api\/stats\/ads reject header
https?:\/\/.+\.youtube\.com\/get_midroll reject header
https?:\/\/.+\.youtube\.com\/pagead\/ reject header
https?:\/\/.+\.youtube\.com\/ptracking\? reject header
https?:\/\/m\.youtube\.com\/_get_ads reject header
https?:\/\/pagead2\.googlesyndication\.com\/pagead\/ reject header
https?:\/\/s\.youtube\.com\/api\/stats\/watchtime?adformat reject header
https?:\/\/youtubei\.googleapis\.com/.+ad_break reject header
 
[Script]
youtube.request = type=http-request,pattern=^https:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/(browse|next|player|reel\/reel_watch_sequence),requires-body=1,max-size=-1,binary-body-mode=1,script-path=https://raw.githubusercontent.com/Maasea/sgmodule/master/Script/Youtube/dist/youtube.request.beta.js
youtube.response = type=http-response,pattern=^https:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/(browse|next|player|search|reel\/reel_watch_sequence|guide|account\/get_setting),requires-body=1,max-size=-1,binary-body-mode=1,script-path=https://raw.githubusercontent.com/Maasea/sgmodule/master/Script/Youtube/dist/youtube.response.beta.js
 
# Хост по умолчанию
[Host]
localhost = 127.0.0.1
 
# Правила переадресации. С доменной зоной ru может работать некорректно
[URL Rewrite]
^(http|https):\/\/(www.)?(g|google)\.ru https://www.google.com 302
[MITM]
hostname = *.googlevideo.com,s.youtube.com,www.youtube.com,www.googleapis.com,youtubei.googleapis.com,*.youtube.com
enable = true
ca-passphrase = Shadowrocket
